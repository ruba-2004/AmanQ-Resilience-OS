import{r as t,c as n,j as e}from"./index-C-92nb6o.js";import{a as l}from"./useDraftStore-BuyA3dDc.js";function m(){const[r,c]=t.useState([]),a=n();t.useEffect(()=>{l().then(c)},[]);const o=s=>{const i=s.context==="S1"?"/server1":s.context==="S2"?"/server2":"/workspace";a(i,{state:{recoverFileId:s.fileId}})};return e.jsxs("div",{className:"recovery-page",children:[e.jsxs("div",{className:"recovery-header",children:[e.jsx("h1",{children:"Recovery"}),e.jsx("p",{className:"recovery-subtitle",children:"Unsaved work is stored here. Restore a draft to open it in the Workspace or Server desktop."})]}),r.length===0?e.jsxs("div",{className:"recovery-empty",children:[e.jsx("p",{children:"No drafts to recover."}),e.jsx("p",{className:"recovery-empty-hint",children:"Edits are saved locally as you type; restore after opening a file in Workspace or Server desktop."})]}):e.jsx("ul",{className:"recovery-list",children:r.map(s=>e.jsxs("li",{className:"recovery-item",children:[e.jsxs("div",{className:"recovery-item-main",children:[e.jsx("span",{className:"recovery-item-id",children:s.fileId}),e.jsxs("span",{className:"recovery-item-time",children:["Last edit: ",new Date(s.lastEditAt).toLocaleString()]})]}),e.jsxs("div",{className:"recovery-item-preview",children:[s.content.slice(0,120),s.content.length>120?"â€¦":""]}),e.jsx("button",{type:"button",className:"recovery-item-btn primary",onClick:()=>o(s),children:"Restore"})]},s.fileId))})]})}export{m as RecoveryPage};
